# path used for opening tmux downloaded from nix
export PATH="$HOME/.nix-profile/bin:$PATH"
# Created by `pipx` on 2024-12-01 23:14:03
export PATH="$PATH:$HOME/.local/bin"

# check git repo status on login and apply updates
function check_git_updates() {
    PREV_DIR=$(pwd)
    REPO_PATHS=("$HOME/.local/share/chezmoi" "$HOME/.config/nix")
    for REPO_PATH in "${REPO_PATHS[@]}"
    do
      cd "$REPO_PATH"
      git fetch --quiet origin
      
      # check if we're behind the remote
      LOCAL=$(git rev-parse @)
      REMOTE=$(git rev-parse @{u})
      
      if [ $LOCAL != $REMOTE ]; then
          echo "Found new config changes. Pulling and applying updates..."
          git pull --quiet
          chezmoi apply
          echo "Config updated successfully!"
      fi
      cd "$PREV_DIR"
    done
}
check_git_updates
